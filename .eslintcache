[{"E:\\development\\map-app\\src\\reportWebVitals.js":"1","E:\\development\\map-app\\src\\App.js":"2","E:\\development\\map-app\\src\\screens\\MapScreen.js":"3","E:\\development\\map-app\\src\\index.js":"4","E:\\development\\map-app\\src\\screens\\HomeScreen.js":"5","E:\\development\\map-app\\src\\components\\Layout\\Layout.js":"6","E:\\development\\map-app\\src\\screens\\PlaceCreateScreen.js":"7","E:\\development\\map-app\\src\\rest\\LoginService.js":"8","E:\\development\\map-app\\src\\rest\\VisitedPlacesService.js":"9","E:\\development\\map-app\\src\\screens\\RemovePlaceScreen.js":"10"},{"size":362,"mtime":1609781840533,"results":"11","hashOfConfig":"12"},{"size":983,"mtime":1610063382941,"results":"13","hashOfConfig":"12"},{"size":3152,"mtime":1609965182601,"results":"14","hashOfConfig":"12"},{"size":500,"mtime":1609781840533,"results":"15","hashOfConfig":"12"},{"size":3418,"mtime":1610056929822,"results":"16","hashOfConfig":"12"},{"size":3085,"mtime":1610062128172,"results":"17","hashOfConfig":"12"},{"size":3825,"mtime":1609942312931,"results":"18","hashOfConfig":"12"},{"size":649,"mtime":1609939400333,"results":"19","hashOfConfig":"12"},{"size":845,"mtime":1610063124408,"results":"20","hashOfConfig":"12"},{"size":4111,"mtime":1610063484419,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"4y9fy7",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"E:\\development\\map-app\\src\\reportWebVitals.js",[],"E:\\development\\map-app\\src\\App.js",[],"E:\\development\\map-app\\src\\screens\\MapScreen.js",["43","44"],"import './MapScreen.css'\r\nimport React, { useRef, useEffect } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport {getPlaces} from \"../rest/VisitedPlacesService\";\r\nimport { toast } from \"react-toastify\";\r\nimport Redirect from \"react-router-dom/es/Redirect\";\r\ntoast.configure();\r\n\r\n\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\r\n\r\n function getDays(date1, date2) {\r\n     var difference = date1.getTime() - date2.getTime();\r\n     return Math.abs(Math.ceil(difference / (1000 * 3600 * 24)));\r\n}\r\n\r\n\r\nconst MapScreen = () => {\r\n    const mapContainerRef = useRef(null);\r\n    const [places,setPlaces]= React.useState([]);\r\n    const [isLoading, setisLoading] = React.useState(false);\r\n\r\n\r\n    const fetchAndMarkPlaces=()=>{\r\n        setisLoading(true)\r\n        getPlaces().then(response=>{\r\n            console.log(response)\r\n            let markerPlaces= response.data\r\n            setPlaces(response.data)\r\n            toast.success(\"Places fetched successfully!!\")\r\n\r\n            const map = new mapboxgl.Map({\r\n                container: mapContainerRef.current,\r\n                // See style options here: https://docs.mapbox.com/api/maps/#styles\r\n                style: 'mapbox://styles/mapbox/streets-v11',\r\n                center: [-104.9876, 39.7405],\r\n                zoom: 2.5,\r\n            });\r\n\r\n            for(let i=0;i<markerPlaces.length;i++){\r\n                var el = document.createElement('div');\r\n                el.className = 'marker';\r\n                el.style.height=`${getDays(new Date(markerPlaces[i].fromDate),  new Date(markerPlaces[i].toDate ))*10}px`\r\n                el.style.width=`${getDays(new Date(markerPlaces[i].fromDate),  new Date(markerPlaces[i].toDate ))*10}px`\r\n                console.log(\"+++++++++++++++\",el.style.width)\r\n                var marker = new mapboxgl.Marker(el)\r\n                    .setLngLat([markerPlaces[i].longitude, markerPlaces[i].latitude])\r\n                    .addTo(map);\r\n            }\r\n\r\n\r\n\r\n\r\n            // add navigation control (the +/- zoom buttons)\r\n            map.addControl(new mapboxgl.NavigationControl(), 'bottom-right');\r\n\r\n\r\n        }).catch((err)=>{\r\n            console.log(err)\r\n            toast.error(\"Some problem with fetching the places\")\r\n\r\n        })\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setisLoading(false);\r\n    };\r\n\r\n    // initialize map when component mounts\r\n\r\n\r\n    useEffect(() => {\r\n        fetchAndMarkPlaces()\r\n\r\n\r\n\r\n\r\n        // clean up on unmount\r\n        // return () => map.remove();\r\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\r\n    if(localStorage.getItem('token')===null){\r\n        return <Redirect to='/'/>;\r\n    } else{\r\n        return(\r\n            <div>\r\n                <Backdrop open={isLoading} onClick={handleClose}>\r\n                    <CircularProgress color=\"inherit\" />\r\n                </Backdrop>\r\n                <div className=\"map-container\" ref={mapContainerRef} />\r\n            </div>\r\n        )\r\n    }\r\n};\r\n\r\nexport default MapScreen;\r\n","E:\\development\\map-app\\src\\index.js",[],"E:\\development\\map-app\\src\\screens\\HomeScreen.js",[],"E:\\development\\map-app\\src\\components\\Layout\\Layout.js",["45","46"],"E:\\development\\map-app\\src\\screens\\PlaceCreateScreen.js",[],"E:\\development\\map-app\\src\\rest\\LoginService.js",[],"E:\\development\\map-app\\src\\rest\\VisitedPlacesService.js",[],"E:\\development\\map-app\\src\\screens\\RemovePlaceScreen.js",["47"],{"ruleId":"48","severity":1,"message":"49","line":22,"column":12,"nodeType":"50","messageId":"51","endLine":22,"endColumn":18},{"ruleId":"48","severity":1,"message":"52","line":48,"column":21,"nodeType":"50","messageId":"51","endLine":48,"endColumn":27},{"ruleId":"48","severity":1,"message":"53","line":1,"column":17,"nodeType":"50","messageId":"51","endLine":1,"endColumn":26},{"ruleId":"48","severity":1,"message":"54","line":18,"column":8,"nodeType":"50","messageId":"51","endLine":18,"endColumn":31},{"ruleId":"48","severity":1,"message":"55","line":55,"column":17,"nodeType":"50","messageId":"51","endLine":55,"endColumn":24},"no-unused-vars","'places' is assigned a value but never used.","Identifier","unusedVar","'marker' is assigned a value but never used.","'useEffect' is defined but never used.","'RemoveCircleOutlineIcon' is defined but never used.","'classes' is assigned a value but never used."]